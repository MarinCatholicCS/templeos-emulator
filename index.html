<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>v86 Emulator</title>
<style>
body {
    background:#000;
    color:#0f0;
    font-family: monospace;
    text-align:center;
}
#screen_container {
    border:2px solid #0f0;
    margin-top:20px;
    display:inline-block;
}
button {
    margin:5px;
    padding:10px;
    font-family:monospace;
}
</style>
</head>
<body>

<h2>v86 Web Emulator</h2>
<div id="loading">Loadingâ€¦</div>

<div id="screen_container"></div>

<div>
    <button onclick="emulator && emulator.restart()">Restart</button>
    <button onclick="emulator && emulator.stop()">Stop</button>
    <button onclick="emulator && emulator.run()">Run</button>
</div>

<!-- Official npm CDN build -->
<script src="https://unpkg.com/v86/build/libv86.js"></script>

<script>
let emulator;

function start() {
    if (typeof V86Starter === "undefined") {
        setTimeout(start, 100);
        return;
    }

    emulator = new V86Starter({
        wasm_path: "https://unpkg.com/v86/build/v86.wasm",

        screen_container: document.getElementById("screen_container"),

        bios: {
            url: "https://copy.sh/v86/bios/seabios.bin",
        },
        vga_bios: {
            url: "https://copy.sh/v86/bios/vgabios.bin",
        },

        // Reliable tiny OS image
        cdrom: {
            url: "https://copy.sh/v86/images/linux.iso",
        },

        memory_size: 128 * 1024 * 1024,
        vga_memory_size: 8 * 1024 * 1024,
        autostart: true,
    });

    emulator.add_listener("emulator-ready", () => {
        document.getElementById("loading").style.display = "none";
    });
}

document.addEventListener("DOMContentLoaded", start);
</script>

</body>
</html>
